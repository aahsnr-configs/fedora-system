#--- Layerrules
layerrule = blur,class:^(com.github.Aylur.ags)$
layerrule = blur,class:^(eww_powermenu)$
layerrule = blur,class:^(gtk-layer-shell)$
layerrule = blur,class:^(nwg-drawer)$
layerrule = blur,class:^(Alacritty)$
layerrule = blur,class:^(alacritty-dropterm)$
layerrule = blur,class:^(emacsclient)$

layerrule = animation slide bottom, rofi
layerrule = animation slide right, swaync-control-center
layerrule = animation slide, swaync-notification-window
layerrule = animation fade, hyprpaper
layerrule = animation fade, swayosd
layerrule = animation fade, selection
layerrule = animation slide right, notificationsmenu
layerrule = animation slide left, dashboardmenu

#--- Animation Rules
windowrulev2 = animation slide up, class:^(alacritty-dropterm)$
windowrulev2 = animation slide down, class:^(explorer)$
windowrulev2 = animation fade, class:^(nwg-drawer)$

#--- Floating Rules
windowrulev2 = float,class:^(deluge-gtk)$
windowrulev2 = float,class:^(kitty-dropterm)$
windowrulev2 = float,class:^(explorer)$
windowrulev2 = float,class:^(org.mate.polkit-mate-authentication-agent-1)$
windowrulev2 = float,class:^(qt5ct)$
windowrulev2 = float,class:^(qt6ct)$
windowrulev2 = float,class:^(file_progress)$
windowrulev2 = float,class:^(confirm)$
windowrulev2 = float,class:^(dialog)$
windowrulev2 = float,class:^(download)$
windowrulev2 = float,class:^(notification)$
windowrulev2 = float,class:^(error)$
windowrulev2 = float,class:^(confirmreset)$
windowrulev2 = float,title:^(Open File)$
windowrulev2 = float,title:^(branchdialog)$
windowrulev2 = float,title:^(Confirm to replace files)
windowrulev2 = float,title:^(File Operation Progress)
windowrulev2 = float,class:^(com.github.Aylur.ags)$
windowrulev2 = float,class:^(xdg-desktop-portal)$
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float,class:^(xdg-desktop-portal-hyprland)$
windowrulev2 = float, class:(blueman-manager), title:(blueman-manager)
windowrulev2 = float,title:^(Sign in - Google Accounts â€” Mozilla Firefox)

#--- IdleInhibit Rules
windowrulev2 = idleinhibit focus, class:^(mpv)$
windowrulev2 = idleinhibit focus, class:^(brave)$, title:^(.*YouTube.*)$
windowrulev2 = idleinhibit fullscreen, class:^(brave)$

#--- DimAround Rules
windowrulev2 = dimaround, class:^(gcr-prompter)$
windowrulev2 = dimaround, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = dimaround, class:^(xdg-desktop-portal-hyprland)$
windowrulev2 = dimaround, class:^(org.mate.polkit-mate-authentication-agent-1)$

#--- Opacity Rules
windowrulev2 = opacity 0.90 0.90,class:^(kitty-dropterm)$
windowrulev2 = opacity 0.90 0.90,class:^(explorer)$
windowrulev2 = opacity 0.80 0.80,class:^(emacsclient)$
windowrulev2 = opacity 0.90 0.90,class:^(kitty)$
windowrulev2 = opacity 0.90 0.90,class:^(footclient)$
windowrulev2 = opacity 0.90 0.80,class:^(steamwebhelper)$
windowrulev2 = opacity 0.90 0.80,class:^(Spotify)$
windowrulev2 = opacity 0.95 0.95,class:^(Code)$
windowrulev2 = opacity 0.90 0.90,class:^(Thunar)$
windowrulev2 = opacity 0.90 0.80,class:^(file-roller)$
windowrulev2 = opacity 0.80 0.80,class:^(ags)$
windowrulev2 = opacity 0.90 0.80,class:^(qt5ct)$
windowrulev2 = opacity 0.90 0.80,class:^(discord)$
windowrulev2 = opacity 0.90 0.80,class:^(WebCord)$
windowrulev2 = opacity 0.90 0.70,class:^(pavucontrol)$
windowrulev2 = opacity 0.90 0.70,class:^(org.mate.polkit-mate-authentication-agent-1)$

#--- Size Rules
windowrulev2 = size 40% 40%,class:^(deluge-gtk)$
windowrulev2 = size 40% 20%,class:^(org.mate.polkit-mate-authentication-agent-1)$
windowrulev2 = size 70% 70%,class:^(foot-dropterm)$
windowrulev2 = size 90% 90%,class:^(explorer)$
windowrulev2 = size 40% 40%,class:^(download)$
windowrulev2 = size 40% 40%,title:^(Open File)$
windowrulev2 = size 40% 40%,title:^(Save File)$
windowrulev2 = size 40% 30%,title:^(Volume Control)$

#--- Workspace Rules
windowrulev2 = workspace special silent,class:^(foot-dropterm)$
windowrulev2 = workspace special silent,class:^(explorer)$

#--- XwaylandVideoBridge Specific Rules
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$
windowrulev2 = stayfocused, title:^()$,class:^(steam)$
windowrulev2 = minsize 1 1, title:^()$,class:^(steam)$
windowrulev2 = stayfocused, title:^()$,class:^(keepassxc)$
windowrulev2 = minsize 1 1, title:^()$,class:^(keepassxc)$

#--- Misc. Rules
windowrulev2 = noblur,class:^()$,title:^()$

# ######## Layer rules ########
layerrule = animation fade, hyprpicker  # Colour picker out animation
layerrule = animation fade, logout_dialog  # wlogout
layerrule = animation fade, selection  # slurp
layerrule = animation fade, wayfreeze

# Fuzzel
layerrule = animation popin 80%, launcher
layerrule = blur, launcher

# Shell
layerrule = noanim, caelestia-(launcher|osd|notifications|border-exclusion|area-picker)
layerrule = animation fade, caelestia-(drawers|background)
layerrule = order 1, caelestia-border-exclusion
layerrule = order 2, caelestia-bar
#layerrule = xray 1, caelestia-(border|launcher|bar|sidebar|navbar|mediadisplay|screencorners)
#layerrule = blur, caelestia-.*
#layerrule = blurpopups, caelestia-.*
#layerrule = ignorealpha 0.57, caelestia-.*


#---- Zen Browser rules
# Zen Browser Popup Floating Rules for Hyprland 0.49.0
# Add these to your ~/.config/hypr/hyprland.conf file

# ==== PRIMARY POPUP DETECTION ====
# The main issue with Zen browser popups is that they start with empty titles
# This rule catches windows with empty titles (the most common popup case)
windowrulev2 = float, class:^(zen)$, title:^$

# ==== SPECIFIC POPUP TYPES ====
# Common Zen browser popup windows with known titles
windowrulev2 = float, class:^(zen)$, title:^(Page Info)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Library)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Downloads)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Bookmarks)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(History)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Developer Tools)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Settings)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Preferences)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Add-ons)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Extensions)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Save As)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Open File)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Print)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Find)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(About)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Certificate)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Security)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Password)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Authentication)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Import)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Export)(.*)$

# ==== DIALOG WINDOWS ====
# Firefox-based dialogs that Zen browser inherits
windowrulev2 = float, class:^(zen)$, title:^(Firefox)(.*)$
windowrulev2 = float, class:^(zen)$, title:^(Mozilla)(.*)$

# ==== FALLBACK RULES ====
# Alternative window class names in case zen changes
windowrulev2 = float, class:^(zen)$, title:^$
windowrulev2 = float, class:^(zen-beta)$, title:^$
windowrulev2 = float, class:^(zen-browser)$, title:^$

# ==== POPUP ENHANCEMENT RULES ====
# Center all floating Zen browser windows
windowrulev2 = center, class:^(zen)$, floating:1
windowrulev2 = center, class:^(zen)$, floating:1
windowrulev2 = center, class:^(zen-beta)$, floating:1
windowrulev2 = center, class:^(zen-browser)$, floating:1

# Optional: Add subtle dim effect behind floating windows
# windowrulev2 = dimaround, class:^(zen)$, floating:1

# Optional: Set default size for very small popups
# windowrulev2 = size 400 300, class:^(zen)$, floating:1, title:^$

# ==== DEBUGGING COMMANDS ====
# Use these commands to identify window properties when popups appear:
# hyprctl clients | grep -A 10 -B 5 "zen"
# hyprctl clients | grep -A 15 class

# ==== NOTES ====
# 1. The 'zen' class is confirmed from GitHub discussions
# 2. Empty title (title:^$) is the key pattern for most popups
# 3. Reload Hyprland after adding rules: hyprctl reload
# 4. If rules don't work, check the exact class with: hyprctl clients
# 5. Some popups may have different class names in different Zen versions
